# Kindle PDF処理Webアプリケーション

## 概要
このアプリケーションは、PDFファイルをアップロードして処理するWebベースのシステムです。
既存のKindle OCRスクリプトをWebアプリケーション化し、ブラウザから簡単に利用できるようにしました。

## 機能
- 📄 PDFファイルのWebアップロード
- 🔒 セキュアなファイル処理
- 📱 レスポンシブなWebインターフェース
- 🎯 ドラッグ&ドロップ対応
- ⚡ リアルタイムファイル検証

## 現在の実装状況
✅ **完了済み**
- Flaskアプリケーションの基本骨格
- PDFファイルアップロード機能
- HTMLテンプレート（メインページ、成功ページ）
- ファイル検証とセキュリティ機能
- エラーハンドリング

🚧 **今後の実装予定**
- 既存KindleOCRクラスの統合
- PDF→画像変換機能
- OCRテキスト抽出
- 処理結果のダウンロード機能

## ファイル構成
```
├── app.py                      # メインのFlaskアプリケーション
├── requirements.txt            # 必要なPythonライブラリ
├── start_app.bat              # アプリケーション起動用バッチファイル
├── README.md                  # このファイル
├── templates/                 # HTMLテンプレート
│   ├── index.html            # メインページ（アップロードフォーム）
│   └── upload_success.html   # アップロード成功ページ
└── uploads/                   # アップロードされたファイルの保存先（自動作成）
```

## セットアップと起動方法

### 方法1: バッチファイルを使用（推奨）
1. `start_app.bat` をダブルクリック
2. 必要なライブラリが自動でインストールされます
3. ブラウザで `http://localhost:5000` にアクセス

### 方法2: 手動セットアップ
1. 必要なライブラリをインストール:
   ```bash
   pip install -r requirements.txt
   ```

2. アプリケーションを起動:
   ```bash
   python app.py
   ```

3. ブラウザで `http://localhost:5000` にアクセス

## 使用方法
1. Webブラウザでアプリケーションにアクセス
2. 「ファイルを選択」ボタンをクリックするか、PDFファイルをドラッグ&ドロップ
3. 「アップロード開始」ボタンをクリック
4. アップロード完了ページで結果を確認

## 設定
### APIキーの設定
OpenRouter APIキーは環境変数で設定してください：

1. **環境変数ファイルの作成**:
   ```bash
   cp .env.example .env
   ```

2. **.envファイルを編集**:
   ```
   OPENROUTER_API_KEY=your-actual-api-key-here
   ```

3. **環境変数の読み込み**（Windows）:
   ```bash
   set OPENROUTER_API_KEY=your-api-key-here
   ```

4. **環境変数の読み込み**（Linux/Mac）:
   ```bash
   export OPENROUTER_API_KEY=your-api-key-here
   ```

**APIキーの取得**: [OpenRouter](https://openrouter.ai/)でアカウントを作成してAPIキーを取得してください。

### アップロード制限
- 対応ファイル形式: PDF
- 最大ファイルサイズ: 16MB
- アップロード先: `uploads/` ディレクトリ

## セキュリティ機能
- ファイル拡張子の検証
- セキュアなファイル名生成
- ファイルサイズ制限
- UUIDによる重複ファイル名回避

## 開発情報
- **フレームワーク**: Flask 2.3.3
- **Python**: 3.7以上推奨
- **フロントエンド**: HTML5, CSS3, JavaScript（バニラ）

## トラブルシューティング
### よくある問題
1. **ポート5000が使用中**
   - `app.py`の最後の行で別のポートを指定: `app.run(port=5001)`

2. **ライブラリインストールエラー**
   - Python環境を確認: `python --version`
   - pipを更新: `python -m pip install --upgrade pip`

3. **ファイルアップロードエラー**
   - ファイルサイズが16MB以下か確認
   - PDFファイル形式か確認

## ヘルスチェック
アプリケーションの状態確認: `http://localhost:5000/health`

## 次のステップ
1. 既存のKindleOCRクラスをapp.pyに統合
2. PDF処理機能の実装
3. OCRテキスト抽出機能の追加
4. 処理結果のダウンロード機能
5. 進捗表示機能の追加

## ライセンス
このプロジェクトは開発中のため、ライセンスは後日決定予定です。